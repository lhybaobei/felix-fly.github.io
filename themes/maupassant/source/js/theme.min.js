+function($){"use strict";var CodeBlockResizer=function(elem){this.$codeBlocks=$(elem)};CodeBlockResizer.prototype={run:function(){var self=this;self.resize();$(window).smartresize(function(){self.resize()})},resize:function(){var self=this;self.$codeBlocks.each(function(){var $gutter=$(this).find(".gutter");var $code=$(this).find(".code");var codePaddings=$code.width()-$code.innerWidth();var width=$(this).outerWidth()-$gutter.outerWidth()+codePaddings;$code.css("width",width);$code.children("pre").css("width",width)})}};$(document).ready(function(){$.fn.hasHorizontalScrollBar=function(){return this.get(0).scrollWidth>this.innerWidth()};var resizer=new CodeBlockResizer("figure.highlight");resizer.run()})}(jQuery);(function(){if(!window.gitalkConfig)return;var onload=window.onload;window.onload=function(){if(onload)onload();var gitalk=new Gitalk(window.gitalkConfig);gitalk.render("gitalkWrapper")}})();(function($){$("body").on("click",function(){$(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(e){e.stopPropagation();var $this=$(this),url=$this.attr("data-url"),qrcode_img=$this.attr("data-qrcode"),encodedUrl=encodeURIComponent(url),id="article-share-box-"+$this.attr("data-id"),title=document.title,offset=$this.offset();if($("#"+id).length){var box=$("#"+id);if(box.hasClass("on")){box.removeClass("on");return}}else{var html=['<div id="'+id+'" class="article-share-box">','<div class="article-share-links">','<a href="//service.weibo.com/share/share.php?title='+title+"&url="+encodedUrl+"&searchPic=true&style=number"+'" class="icon-weibo" target="_blank" title="Weibo"></a>','<a href="//connect.qq.com/widget/shareqq/index.html?url='+encodedUrl+"&title="+title+'" class="icon-qq" target="_blank" title="QQ"></a>','<a href="//shuo.douban.com/!service/share?href='+encodedUrl+"&name="+title+'" class="icon-douban" target="_blank" title="QQ"></a>','<a href="'+qrcode_img+'" class="icon-qrcode" target="_blank" title="QR code"></a>','<div class="qrcode"><img src='+qrcode_img+"></div>","</div>","</div>"].join("");var box=$(html);$("body").append(box)}$(".article-share-box.on").hide();box.css({top:offset.top+25,left:offset.left}).addClass("on")}).on("click",".article-share-box",function(e){e.stopPropagation()}).on("click",".article-share-box-input",function(){$(this).select()}).on("click",".article-share-box-link",function(e){e.preventDefault();e.stopPropagation();window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")})})(jQuery);+function($,sr){var debounce=function(func,threshold,execAsap){var timeout;return function debounced(){var obj=this,args=arguments;function delayed(){if(!execAsap){func.apply(obj,args)}timeout=null}if(timeout){clearTimeout(timeout)}else if(execAsap){func.apply(obj,args)}timeout=setTimeout(delayed,threshold||100)}};jQuery.fn[sr]=function(fn){return fn?this.bind("resize",debounce(fn)):this.trigger(sr)}}(jQuery,"smartresize");$(window).scroll(function(){$(window).scrollTop()>500?$(".to-top").addClass("show"):$(".to-top").removeClass("show")});$(".to-top").click(function(){$("html, body").animate({scrollTop:0},500);return false});