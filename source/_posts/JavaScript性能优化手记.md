---
title: JavaScript性能优化手记
tags:
  - gwt
  - JavaScript
  - 性能优化
  - 浏览器
url: 762.html
id: 762
categories:
  - 编程开发
date: 2010-12-02 21:54:31
---

在GWT开发过程总，遇到了一个javascript执行效率慢的问题，分析发现：造成性能慢的主要原因是要加载大量数据，针对此问题寻找解决方案。  

先查阅了一下不同浏览器执行javascript的性能对比  

详细的结果可以参考:[2010年最新主流浏览器速度测试](http://news.newhua.com/news1/news/2010/626/106261079J52GJ3C04G5E9DEFCE435GG77JAJD3D409DGEHF3CI746.html)  

主要的结论就是IE浏览器执行速度最慢，因此优化主要针对IE进行  

优化的关键是找到影响速度的瓶颈  

经过分析，js获取到大量数据后，将数据进行解析整理，最终生成表格形式呈现给用户，表格是由FlexTable来生成，并在UIBinder中创建。  

原有的做法是将数据逐条加入到FlexTable中，而这一方法实际是对DOM进行添加节点操作，而已知的情况是DOM操作是费时费力的，因此性能缓慢的主要因素就在于此。对于IE浏览器，特别是IE7，执行效率不能忍受。  

在优化前，IE7加载页面则失去响应,大约数分钟至十分钟才能加载完毕，即使加载完后，整个页面的性能也很差。  

优化的方法是，先在内存中建立表格元素同时添加数据节点，所有数据添加完后，再将表格元素添加到DOM中。优化之后，IE7加载同样的页面及数据，20秒左右可以完成，效率显著提升。  

同时对于firefox等其他浏览器也有一定的性能提升。  

另外补充一点，对动态生成的元素进行缓存，一方面可以减少与服务器的交互及负载，同时也能够提升页面执行效率，缓存当善用之。