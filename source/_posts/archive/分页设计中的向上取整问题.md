---
title: 分页设计中的向上取整问题
tags:
  - 分页
  - 向上取整
  - 网站开发
url: 742.html
id: 742
categories:
  - 编程开发
date: 2010-10-09 20:36:06
---

在网站开发过程中，经常要涉及到分页的问题，要实现分页就需要计算总页数，假设每页显示5条记录，一共有12条记录就需要分3页，实现这样的分页依靠就是向上取整的算法。  

在java.lang.Math中提供了一个静态函数ceil(double x)，调用它很简单就可以实现，设总数为a，每页显示b条，则代码如下：  

int count = (int)Math.ceil((double)a/(double)b);

下面是在网上看到的另外一种算法：  

A,B都是整数并且 A>0, B>0，求 ┌ A/B ┐ 即 A/B 的上取整。当 A/B 整除，往上取整返回值为 A/B 。当不整除，返回值是 int(A/B) + 1。  

这个算法的一个应用：如果你有一个动态增长的缓冲区，增长的步长是 B,某一次缓冲区申请的大小是 A，这个时候，就可以用这个算法，计算出缓冲区的一个合适大小了，正好可以容纳A，并且不会过于得多，多余部分不会比B多。  

公式：  

UP(A/B) = int( (A+B-1)/B )

证明：  

上取整用UP表示  

由于A>0、B>0，且A、B都是整数，所以可以设A=NB+M  

其中N为非负整数，M为0到B-1的数，则

A/B = N + M/B
(A+B-1)/B = N + 1 + (M - 1)/B;

当M为0时，

UP(A/B) = N，
int((A+B-1)/B) = N + int(1 - 1/B) = N

当M为1到B-1的数时，0 < = M-1 <= B-2

UP(A/B) = N + 1，
int((A+B-1)/B) = N + 1 + int((M-1)/B) = N + 1
$1以对A>0、B>0的整数A、B都有：
UP(A/B) = int((A+B-1)/B)